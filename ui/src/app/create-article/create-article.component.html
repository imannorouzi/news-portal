<div class="container post-container p-3 container-shadow">
  <div [class]="'text-center justify-content-center mb-3 bg-white'
      + (post.imageUrl ? '' : 'image-container')">
    <div class="m-auto text-center">
      <img class=" w-100" (click)="onImageClick()" [src]="post.imageUrl">
      <div *ngIf="!post.imageUrl" class="m-5">
        <a [routerLink]="" class="btn-white-inside" (click)="onImageClick()">عکس</a>
      </div>
    </div>

    <input (change)="fileChanged($event)" #fileInput type="file" hidden="hidden">
  </div>

  <div class="">
    <input id="title" type="text" class="" placeholder="عنوان" [(ngModel)]="post.title" class="mb-2 bg-white">
  </div>

  <div class="">
    <input id="author" type="text" class="" placeholder="نام نویسنده" [(ngModel)]="post.author" class="mb-2 bg-white">
  </div>
  <!--          <div highlight class="editor-container">-->

  <!-- Post Sections -->
  <div class="mb-4">
    <div *ngFor="let postSection of post.postSections; let i = index;">
      <app-section-separator (btnClicked)="addSection(i)"></app-section-separator>
      <app-post-section (copyClicked)="copySection(i)" (removeClicked)="removeSection(i)" [postSection]="postSection" ></app-post-section>
      <app-section-separator (btnClicked)="addSection(i+1)" *ngIf="i === post.postSections.length - 1" ></app-section-separator>
    </div>
  </div>

  <a [routerLink]="" class="btn-white-inside" (click)="updatePost()">ذخیره</a>

</div>

<!-- Image Modal -->
<!--<modal #imageCropperModal
       [modalTitle]="'Edit Image Size'"
       [zIndex]="6"
       [maximizable]="true">
  <ng-container body>
    <img-cropper #cropper [image]="data" [settings]="cropperSettings" ></img-cropper>
  </ng-container>
  <ng-container footer>
    <div class="text-right">
      <a [routerLink]="" class="btn-dark-inside" (click)="onImageCropperModalOk()">خوبه</a>
    </div>
  </ng-container>
</modal>-->

<app-modal #imageCropperModal
       [modalTitle]="'اندازه عکس'"
       [size]="'auto'"
       [zIndex]="11">
  <ng-container class="app-modal-body ">
    <div class="text-center">
      <image-cropper #cropper
                     [imageChangedEvent]="imageChangedEvent"
                     [maintainAspectRatio]="true"
                     [aspectRatio]="5 / 3"
                     format="png"
                     (imageCropped)="imageCropped($event)"
                     (loadImageFailed)="loadImageFailed()"></image-cropper>
    </div>
  </ng-container>
  <ng-container class="app-modal-footer">
    <div class="text-right">
      <button type="button" class="btn primary" (click)="onImageCropperModalOk()">خوبه</button>
    </div>
  </ng-container>
</app-modal>
