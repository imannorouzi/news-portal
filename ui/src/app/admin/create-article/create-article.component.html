<div class="container post-container p-3 container-shadow">
  <div class="text-left">
    <a class="app-button secondary" routerLink="/admin"><i class="fa fa-arrow-left"></i></a>
  </div>
  <div [class]="'text-center justify-content-center mb-3 bg-white'
      + (post.imageUrl ? '' : 'image-container')">
    <div class="m-auto text-center">
      <img class=" w-100" (click)="onImageClick()" [src]="post.imageUrl">
      <div *ngIf="!post.imageUrl" class="m-5">
        <a [routerLink]="" class="app-button secondary" (click)="onImageClick()">عکس</a>
      </div>
    </div>

    <input (change)="fileChanged($event)" #fileInput type="file" hidden="hidden">
  </div>

  <div class="">
    <input id="title" type="text" class="" placeholder="عنوان" [(ngModel)]="post.title" class="mb-2 bg-white">
  </div>

  <div class="">
    <input id="author" type="text" class="" placeholder="نام نویسنده" [(ngModel)]="post.author" class="mb-2 bg-white">
  </div>
  <!--          <div highlight class="editor-container">-->

  <!-- Post Sections -->
  <div class="mb-4">
    <div *ngFor="let postSection of post.postSections; let i = index;">
      <app-section-separator (btnClicked)="addSection(i)"></app-section-separator>
      <app-post-section (copyClicked)="copySection(i)" (removeClicked)="removeSection(i)" [postSection]="postSection" ></app-post-section>
      <app-section-separator (btnClicked)="addSection(i+1)" *ngIf="i === post.postSections.length - 1" ></app-section-separator>
    </div>
  </div>

  <div class="">
    <textarea id="excerpt" rows="8" placeholder="خلاصه و متن تلگرام" [(ngModel)]="post.excerpt" class="mb-2 bg-white"></textarea>
  </div>

  <app-create-tags #tags></app-create-tags>


  <div class="form-group row" >
    <label class="col-md-3 col-form-label text-right font-heading">قیافه</label>
    <div class="col-md-9 text-right btn-group btn-group-toggle ltr" data-toggle="type">
      <label class="btn btn-outline-primary " [class.active]="post.style === '2'">
        <input type="radio" [(ngModel)]="post.style" class="form-control" checked value="2"> معمولی
      </label>
      <label class="btn btn-outline-primary" [class.active]="post.style === '1'">
        <input type="radio" [(ngModel)]="post.style" class="form-control" value="1"> مهم
      </label>
    </div>
  </div>

  <div class="form-group " >
    <label class="l col-form-label text-right font-heading">دسته‌ها</label>
    <div class="text-left">
      <label class="mr-3"  *ngFor="let cat of categories">
        <input type="checkbox" [(ngModel)]="cat.checked" class="">  {{cat.name}}
      </label>
    </div>
  </div>

  <a [routerLink]="" class="btn-white-inside font-heading" (click)="updatePost()">ذخیره</a>

</div>

<!-- Image Modal -->
<!--<modal #imageCropperModal
       [modalTitle]="'Edit Image Size'"
       [zIndex]="6"
       [maximizable]="true">
  <ng-container body>
    <img-cropper #cropper [image]="data" [settings]="cropperSettings" ></img-cropper>
  </ng-container>
  <ng-container footer>
    <div class="text-right">
      <a [routerLink]="" class="btn-dark-inside" (click)="onImageCropperModalOk()">خوبه</a>
    </div>
  </ng-container>
</modal>-->

<app-modal #imageCropperModal
       [modalTitle]="'اندازه عکس'"
       [size]="'auto'"
       [zIndex]="11">
  <ng-container class="app-modal-body ">
    <div class="text-center">
      <image-cropper #cropper
                     [imageChangedEvent]="imageChangedEvent"
                     [maintainAspectRatio]="true"
                     [aspectRatio]="5 / 3"
                     format="png"
                     (imageCropped)="imageCropped($event)"
                     (loadImageFailed)="loadImageFailed()"></image-cropper>
    </div>
  </ng-container>
  <ng-container class="app-modal-footer">
    <div class="text-right">
      <button type="button" class="app-button" (click)="onImageCropperModalOk()">خوبه</button>
    </div>
  </ng-container>
</app-modal>
